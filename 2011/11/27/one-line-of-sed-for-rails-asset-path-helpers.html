<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta content='width=device-width, initial-scale=1.0' name='viewport' />
    <meta content='text/html; charset=utf-8' http-equiv='content-type' />
    <meta content='Nicholas Fine' name='author' />
    <link href='http://feeds.feedburner.com/ndfine' rel='alternate' title='Nicholas Fine' type='application/atom+xml' />
    <link href='http://fonts.googleapis.com/css?family=Lato|Merriweather' rel='stylesheet' type='text/css' />
    <link href='/assets/screen.css' media='screen' rel='stylesheet' type='text/css' />
    <script src='//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js' type='text/javascript'></script>
    <script src='/assets/application.js' type='text/javascript'></script>
    <script type='text/javascript'>
      //<![CDATA[
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-126126-3']);
        _gaq.push(['_trackPageview']);
        
        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
      //]]>
    </script>
    <title>One line of sed for Rails 3.1 asset path helpers</title>
  </head>
  <body>
    <div class='navbar'>
      <div class='navbar-inner'>
        <div class='container-fluid'>
          <a class='brand' href='/'>
            <h2>
              Nicholas Fine
            </h2>
          </a>
        </div>
      </div>
    </div>
    <div class='container-fluid'>
      <div class='row-fluid'>
        <div class='span8'>
          <article>
  <div class='well'>
    
      <h2><a href='/2011/11/27/one-line-of-sed-for-rails-asset-path-helpers.html'>One line of sed for Rails 3.1 asset path helpers</a></h2>
    
    <span class='label'>27 Nov 2011</span>
    
  </div>
  
    With the advent of the new asset pipeline in Rails 3.1.x, I have had to 
convert many stylesheets into erb templates to make use of the asset_path('/path/to/img')
helpers.  This seemed like an obvious job for a little [sed](http://www.gnu.org/software/sed/manual/sed.html), 
so I pulled this together.

Say you have a stylesheet from the [jQuery UI](http://jqueryui.com) project that looks like
[this](/stylesheets/jquery-ui-1.8.14.custom.css).  Type the following on a command line on
a system with sed installed:


    sed 's/url(\([^(]*\))/url(<%= asset_path("\1") %>)/g' jquery-ui-1.8.14.custom.css > jquery-ui-1.8.14.custom.css.erb

You should get results like this partial diff of the two files:

<pre class='prettyprint'>    
  62c62
  < .ui-widget-content { border: 1px solid #dddddd; background: #eeeeee url(images/ui-bg_highlight-soft_100_eeeeee_1x100.png) 50% top repeat-x; color: #333333; }
  ---
  > .ui-widget-content { border: 1px solid #dddddd; background: #eeeeee url(<%= asset_path("images/ui-bg_highlight-soft_100_eeeeee_1x100.png") %>) 50% top repeat-x; color: #333333; }
  64c64
  < .ui-widget-header { border: 1px solid #e78f08; background: #f6a828 url(images/ui-bg_gloss-wave_35_f6a828_500x100.png) 50% 50% repeat-x; color: #ffffff; font-weight: bold; }
  ---
  > .ui-widget-header { border: 1px solid #e78f08; background: #f6a828 url(<%= asset_path("images/ui-bg_gloss-wave_35_f6a828_500x100.png") %>) 50% 50% repeat-x; color: #ffffff; font-weight: bold; }
  69c69
  < .ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default { border: 1px solid #cccccc; background: #f6f6f6 url(images/ui-bg_glass_100_f6f6f6_1x400.png) 50% 50% repeat-x; font-weight: bold; color: #1c94c4; }
  ---
  > .ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default { border: 1px solid #cccccc; background: #f6f6f6 url(<%= asset_path("images/ui-bg_glass_100_f6f6f6_1x400.png") %>) 50% 50% repeat-x; font-weight: bold; color: #1c94c4; }
  71c71
  < .ui-state-hover, .ui-widget-content .ui-state-hover, .ui-widget-header .ui-state-hover, .ui-state-focus, .ui-widget-content .ui-state-focus, .ui-widget-header .ui-state-focus { border: 1px solid #fbcb09; background: #fdf5ce url(images/ui-bg_glass_100_fdf5ce_1x400.png) 50% 50% repeat-x; font-weight: bold; color: #c77405; }
  ---
  > .ui-state-hover, .ui-widget-content .ui-state-hover, .ui-widget-header .ui-state-hover, .ui-state-focus, .ui-widget-content .ui-state-focus, .ui-widget-header .ui-state-focus { border: 1px solid #fbcb09; background: #fdf5ce url(<%= asset_path("images/ui-bg_glass_100_fdf5ce_1x400.png") %>) 50% 50% repeat-x; font-weight: bold; color: #c77405; }
</pre>

  
</article>

        </div>
        <div class='span4 offset1'>
          <div class='well sidebar-nav'>
            <ul class='nav nav-list'>
              <li class='nav-header'>
                Ceci n'est pas un menu
              </li>
              <li>
                <a href='/about'>
                  <i class='icon-user'></i>
                  About
                </a>
              </li>
              <li>
                <a href='/posts'>
                  <i class='icon-book'></i>
                  Archives
                </a>
              </li>
              <li>
                <a href='http://github.com/yrgoldteeth'>
                  <i class='icon-cog'></i>
                  GitHub
                </a>
              </li>
              <li>
                <a href='http://pinboard.in/u:ndfine'>
                  <i class='icon-folder-open'></i>
                  Pinboard
                </a>
              </li>
              <li>
                <a href='http://twitter.com/yrgoldteeth'>
                  <i class='icon-retweet'></i>
                  Twitter
                </a>
              </li>
              <li>
                <a href='mailto:nick@ndfine.com'>
                  <i class='icon-envelope'></i>
                  Email
                </a>
              </li>
              <li>
                <a href='http://feeds.feedburner.com/ndfine'>
                  <i class='icon-share-alt'></i>
                  Feed
                </a>
              </li>
              <li class='nav-header'>
                Projects
              </li>
              <li>
                <a href='http://annotatethebastards.org'>Annotate the Bastards!</a>
              </li>
              <li>
                <a href='http://yrgoldteeth.github.com/darkdowncss'>Darkdown.css</a>
              </li>
              <li>
                <a href='http://yrgoldteeth.github.com/whereabouts'>Whereabouts Plugin</a>
              </li>
              <li>
                <a href='https://github.com/yrgoldteeth/teleportd'>Teleportd Gem</a>
              </li>
              <li>
                <a href='https://github.com/yrgoldteeth/city_grid'>City Grid Gem</a>
              </li>
              <li>
                <a href='https://github.com/yrgoldteeth/hungrytable'>Hungrytable Gem</a>
              </li>
              <li>
                <a href='https://rubygems.org/gems/bootstrap-will_paginate/'>Bootstrap-will_paginate Gem</a>
              </li>
              <li>
                <a href='https://rubygems.org/gems/css3-progress-bar-rails/'>CSS3-progress-bar-rails Gem</a>
              </li>
              <li class='nav-header'>
                Colophon
              </li>
              <li>
                <a href='http://github.com/mojombo/jekyll'>Jekyll</a>
              </li>
              <li>
                <a href='http://twitter.github.com/bootstrap/'>Twitter Bootstrap</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
